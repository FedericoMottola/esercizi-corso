<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aggiungi Prodotto</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css">
</head>
<body>
    <nav class="navbar bg-secondary mb-4">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="logo.png" alt="logoAmazon" width="100" height="40">
            <a href="./product.html">Home</a>
          </a>
        </div>
    </nav>

    <main>
        <form class="container">
            <h1>Aggiungi prodotto</h1>
            <hr>
            <div class="mb-3">
              <label  class="form-label">Nome</label>
              <input type="text" class="form-control" id="nome">
            </div>
            <div class="mb-3">
              <label  class="form-label">Brand</label>
              <input type="text" class="form-control" id="brand">
            </div>
            <div class="mb-3">
                <label  class="form-label">Prezzo</label>
                <input type="number" class="form-control" id="prezzo">
              </div>
              <div class="mb-3">
                <label class="form-label">URL immagine</label>
                <input type="text" class="form-control" id="url">
              </div>
              <div class="mb-3">
                <label class="form-label">Descrizione prodotto</label>
                <input type="text" class="form-control" id="descrizione">
              </div>
            <button type="submit" class="btn btn-primary">Reset</button>
            <button type="button" class="btn btn-warning" onclick="sendData()">Salva</button>
          </form>
    </main>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script>
      const token = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTc4MmM1NmMwNTgzNTAwMTg1MjJkZTYiLCJpYXQiOjE3MDIzNzQ0ODYsImV4cCI6MTcwMzU4NDA4Nn0.rh9ckj0X2izoP_x9c5ALxf1Wr78dNgDxMOvx3EwH74A"
const url = "https://striveschool-api.herokuapp.com/api/product/"



let products = []


      const sendData = () => {
    const newProduct =  { 
        "name": document.getElementById('nome').value,
        "description": document.getElementById('descrizione').value,
        "brand": document.getElementById('brand').value,
        "imageUrl": document.getElementById('url').value,
        "price": document.getElementById('prezzo').value
    }

    fetch(url, {
        method: "POST",
        headers: {
            "Authorization": token,
            "Content-Type": "application/json"
        },
        body: JSON.stringify(newProduct)
    })
    .then((response) => response.json())
    .then(data => {
      // products = data
            products.push(data)
            
        
    })
.catch(err => alert(err))

window.location.href="./product.html"
}
    </script>
</body>
</html>